

IF OBJECT_ID('[VM].[VIEWCASHBANK_DETAILS]') IS NULL BEGIN EXECUTE ('CREATE VIEW [VM].[ViewCASHBANK_DETAILS] AS SELECTsm.SB_Invoice INVOICE_NO,sm.INVOICE_DATE INVOICE_DATE,sm.INVOICE_MITI INVOICE_MITI,sm.INVOICE_TIME INVOICE_TIME,sm.PB_Vno REF_VOUCHER_NO,sm.Vno_Date REF_VOUCHER_DATE,sm.Vno_Miti REF_VOUCHER_MITI,sm.Customer_Id LEDGER_ID,gl.GLName CUSTOMER,gl.PanNo CUSTOMER_PAN,gl.GLCode CUSTOMER_CODE,gl.GrpID GROUP_ID,ag.GrpName GROUP_DESC,ag.PrimaryGrp GROUP_PRIMARY,ag.GrpType GROUP_TYPE,ag.Schedule GROUP_SCHEDULE,gl.SubGrpId SUB_GROUP_ID,sm.Party_Name PARTY_NAME,sm.Vat_No VAT,sm.Contact_Person CONTACT_PERSON,sm.Mobile_No MOBILE,sm.Address ADDRESS,sm.ChqNo CHQ_NUMBER,sm.ChqDate CHQ_DATE,sm.Invoice_Type INVOICE_TYPE,sm.Invoice_Mode INVOICE_MODE,sm.Payment_Mode PAYMENT_MODE,sm.DueDays DUE_DAYS,sm.DueDate DUE_DATE,sm.Agent_ID AGENT_NO,ja.AgentName AGENT_DESCREPTION,ja.AgentCode AGENT_CODE,sm.Subledger_Id SUBLEDER_ID,s.SLName SUBLEDGER_DESCRIPTION,s.SLCode SUBLEDGER_CODE,sm.SO_Invoice SALES_ORDER_INVOICE,sm.SO_Date SALES_ORDER_DATE,sm.SC_Invoice SALES_CLALLAN_INVOICE,sm.SC_Date SALES_CHALLAN_DATE,sm.Cls1 CLS1,sm.Cls2	CLS2,sm.Cls3	CLS3,sm.Cls4	CLS4,sm.CounterId COUNTER_ID,sm.Cur_Id CURRENCY_ID,sm.Cur_Rate CURRENCY_RATE,sm.B_Amount BILL_AMOUNT,sm.T_Amount TERM_AMOUNT,sm.N_Amount NET_AMOUNT,sm.LN_Amount LOCAL_NET_AMOUNT,sm.V_Amount VAT_AMOUNT,sm.Tbl_Amount TAXABLE_AMOUNT,sm.Tender_Amount TENDER_AMOUNT,sm.Return_Amount RETURN_AMOUNT,sm.Action_Type ACTION_TYPE,sm.In_Words IN_WORDS,sm.Remarks	REMARKS,sm.R_Invoice REVERSE_INVOICE,sm.Is_Printed IS_PRINTED,sm.No_Print	NO_PRINT,sm.Printed_By PRINTED_BY,sm.Printed_Date	PRINTED_DATE,sm.Audit_Lock AUDIT_LOCK,sm.Enter_By	ENTER_BY,sm.Enter_Date ENTER_DATE,sm.Reconcile_By	RECONCILE_BY,sm.Reconcile_Date RECONCILE_DATE,sm.Auth_By AUTH_BY,sm.Auth_Date AUTH_DATE,sm.Cleared_By CLEARED_BY,sm.Cleared_Date	CLEARED_DATE,sm.Cancel_By CANCEL_BY,sm.Cancel_Date Cancel_Date,sm.Cancel_Remarks Cancel_Remarks,sm.CUnit_Id COMPANY_UNIT_ID,sm.CBranch_Id COMPNY_BRANCH_ID,sm.IsAPIPosted IS_API_POSTED,sm.IsRealtime IS_REAL_TIME,sm.FiscalYearId FISCAL_YEAR_ID,sm.MShipId MEMBER_SHIP_ID,mss.MShipDesc MEMBERSHIP_DESCRIPTION,mss.MShipShortName MEMBERSHIP_CODE,mss.PhoneNo MEMBERSHIP_CONTACT,mss.LedgerId MEMBERSHIP_LEDGER_ID,gl1.GLName MEMBERSHIP_LEDGER_DESCRIPTION,gl1.GLCode MEMBERSHIP_LEDGER_CODE,sm.TableId TABLE_ID,tm.TableName TABLE_DESCRIPTION,tm.TableCode TABLE_CODE,tm.FloorId TABLE_FLOOR_ID,F.Description TABLE_FLOOR_DESCRIPTION,F.ShortName TABLE_FLOOR_CODE,F.Type TABLE_FLOOR_TYPE,F.Branch_ID TABLE_FLOOR_BRANCH_ID,B.Branch_Name TABLE_FLOOR_BRANCH_DESCRIPTION,B.Branch_Code TABLE_FLOOR_BRANCH_CODE,B.Address TABLE_FLOOR_BRANCH_ADDRESS,B.Country TABLE_FLOOR_BRANCH_COUNTRY,B.City TABLE_FLOOR_BRANCH_CITY,B.PhoneNo TABLE_FLOOR_BRANCH_CONTACT,B.Fax TABLE_FLOOR_BRANCH_FAX,B.Email TABLE_FLOOR_BRANCH_EMAIL,B.ContactPerson TABLE_FLOOR_BRANCH_CONTACT_PERSON,tm.Branch_ID TABLE_BRANCH_ID,b1.Branch_Name TABLE_BRANCH_DESCRIPTION,B1.Branch_Code TABLE_BRANCH_CODE,B1.Address TABLE_BRANCH_ADDRESS,B1.Country TABLE_BRANCH_COUNTRY,B1.City TABLE_BRANCH_CITY,B1.PhoneNo TABLE_BRANCH_CONTACT,B1.Fax TABLE_BRANCH_FAX,B1.Email TABLE_BRANCH_EMAIL,B1.ContactPerson TABLE_BRANCH_CONTACT_PERSON,TM.Company_Id TABLE_COMPANY_ID,CU1.CmpUnit_Name TABLE_COMPANY_UNIT_DESCRIPTION,CU1.CmpUnit_Code TABLE_COMPANY_UNIT_CODE,CU1.Address TABLE_COMPANY_UNIT_ADDRESS,CU1.Country TABLE_COMPANY_UNIT_COUNTRY,CU1.City TABLE_COMPANY_UNIT_CITY,CU1.PhoneNo TABLE_COMPANY_UNIT_CONTACT,CU1.Fax TABLE_COMPANY_UNIT_FAX,CU1.Email TABLE_COMPANY_UNIT_EMAIL,CU1.ContactPerson TABLE_COMPANY_UNIT_CONTACT_PERSON,TM.TableStatus TABLE_STATUS,TM.Status STATUS,sm.DoctorId DOCTOR_ID,D.DrName DOCTOR_DESCRIPTION,D.DrShortName DOCTOR_CODE,D.DrType DOCTOR_TYPE,D.ContactNo DOCTOR_CONTACT,D.Address DOCTOR_ADDRESS,D.BranchId DOCTOR_BRANCH_ID,B2.Branch_Name DOCTOR_BRANCH_DESCRIPTION,B2.Branch_Code DOCTOR_BRANCH_CODE,B2.Address DOCTOR_BRANCH_ADDRESS,B2.Country DOCTOR_BRANCH_COUNTRY,B2.City DOCTOR_BRANCH_CITY,B2.PhoneNo DOCTOR_BRANCH_CONTACT,B2.Fax DOCTOR_BRANCH_FAX,B2.Email DOCTOR_BRANCH_EMAIL,B2.ContactPerson DOCTOR_BRANCH_CONTACT_PERSON,D.CompanyUnit DOCTOR_COMPANY_UNIT_ID,CU.CmpUnit_Name DOCTOR_COMPANY_UNIT_DESCRIPTION,CU.CmpUnit_Code DOCTOR_COMPANY_UNIT_CODE,CU.Address DOCTOR_COMPANY_UNIT_ADDRESS,CU.Country DOCTOR_COMPANY_UNIT_COUNTRY,CU.City DOCTOR_COMPANY_UNIT_CITY,CU.PhoneNo DOCTOR_COMPANY_UNIT_CONTACT,CU.Fax DOCTOR_COMPANY_UNIT_FAX,CU.Email DOCTOR_COMPANY_UNIT_EMAIL,CU.ContactPerson DOCTOR_COMPANY_UNIT_CONTACT_PERSON,D.Status DOCTOR_STATUS,sm.PatientId PATIENT_ID,PM.RefDate PATIENT_REFRERNENCE_DATE,PM.IPDId PATINET_IPDID,PM.Title PATINET_TITLE,PM.PaitentDesc PATIENT_DESCRIPTION,PM.ShortName PATIENT_CODE,PM.TAddress PATIENT_ADDRESS,PM.AccountLedger PATIENT_ACCOUNT_LEDGER,ag1.PrimaryGroupId PATIENT_PRINMARY_GROUP_ID,AG1.GrpName PATIENT_PRINMARY_GROUP_DESCRIPTION,AG1.GrpCode PATIENT_ACCOUNTGROUP_CODE,PM.ContactNo PATIENT_CONTACT,PM.Age PATIENT_AGE,PM.AgeType PATIENT_AGE_TYPE,PM.DateofBirth PATIENT_DATE_OF_BIRTH,PM.Gender PATIENT_GENDER,PM.MaritalStatus PATINET_MARITAL_STATUS,PM.RegType PATIENT_REGISTRATION_TYPE,PM.Nationality PATIENT_NATIONALITY,PM.Religion PATIENT_RELIGION,PM.BloodGrp PATIENT_BLOOD_GROUP,PM.DepartmentId PATIENT_DEPARTMENT,D1.DName PATIENT_DEPATRMENT_DESCRIPTION,D1.DCode PATIENT_DEPARTMENT_CODE,D1.Dlevel PATIENT_DEPARTMNET_LEVEL,D1.Branch_ID PATIENT_DEPARTMNET_BRANCH_ID,B3.Branch_Name  PATIENT_DEPARTMNET_BRANCH_DESCRIPTION,B3.Branch_Code  PATIENT_DEPARTMNET_BRANCH_CODE,B3.Address  PATIENT_DEPARTMNET_BRANCH_ADDRESS,B3.Country  PATIENT_DEPARTMNET_BRANCH_COUNTRY,B3.City  PATIENT_DEPARTMNET_BRANCH_CITY,B3.PhoneNo  PATIENT_DEPARTMNET_BRANCH_CONTACT,B3.Fax  PATIENT_DEPARTMNET_BRANCH_FAX,B3.Email  PATIENT_DEPARTMNET_BRANCH_EMAIL,B3.ContactPerson  PATIENT_DEPARTMNET_BRANCH_CONTACT_PERSON,D1.Status PATINET_DEPARTMENT_STATUS,PM.DrId PATINET_DOCTOR_ID,D2.DrName PATIENT_DOCTOR_DESCRIPTION,D2.DrShortName PATIENT_DOCTOR_CODE,D2.DrType PATIENT_DOCTOR_TYPE,D2.ContactNo PATIENT_DOCTOR_CONTACT,D2.Address PATIENT_DOCTOR_ADDRESS,D2.BranchId PATIENT_DOCTOR_BRANCH_ID,PM.RefDrDesc REFRENCE_DOCTOR_DESCRIPTION,PM.EmailAdd DOCTOR_EMAIL,PM.PastHistory PAST_HISTORY,sm.HDepartmentId HDEPARTMENTID ,sm.PAttachment1	PATTACHMENT1,sm.PAttachment2	PATTACHMENT2,sm.PAttachment3	PATTACHMENT3,sm.PAttachment4	PATTACHMENT4,sm.PAttachment5	PATTACHMENT5,sm.SyncGlobalId	SYNCGLOBALID,sm.SyncOriginId	SYNCORIGINID,sm.SyncCreatedOn SYNCCREATEDON,sm.SyncLastPatchedOn SYNCLASTPATCHEDON,sm.SyncRowVersion SYNCROWVERSIO,sm.SyncBaseId SYNCBASEID FROM AMS.SB_Master sm LEFT OUTER JOIN AMS.GeneralLedger gl ON gl.GLID = sm.Customer_Id LEFT OUTER JOIN AMS.AccountGroup ag ON gl.GrpID = ag.GrpID LEFT OUTER JOIN AMS.AccountSubGroup asg ON gl.SubGrpId = asg.SubGrpId LEFT OUTER JOIN AMS.JuniorAgent ja ON sm.Agent_ID = ja.AgentId LEFT OUTER JOIN AMS.Subledger s ON sm.Subledger_Id = s.SLId LEFT OUTER JOIN AMS.MemberShipSetup mss ON  sm.MShipId = mss.MShipId LEFT OUTER JOIN AMS.GeneralLedger gl1 ON gl1.GLID = mss.LedgerId LEFT OUTER JOIN AMS.TableMaster tm  ON tm.TableId = sm.TableId LEFT OUTER JOIN AMS.Floor f ON f.FloorId = tm.FloorId LEFT OUTER JOIN AMS.Branch b ON B.Branch_ID = F.Branch_ID LEFT OUTER JOIN AMS.Branch b1 ON B1.Branch_ID = tm.Branch_ID LEFT OUTER JOIN AMS.CompanyUnit cu1 ON CU1.CmpUnit_ID = TM.Company_Id LEFT OUTER JOIN HOS.Doctor d ON D.DrId = SM.DoctorId LEFT OUTER JOIN AMS.Branch b2 ON B2.Branch_ID = D.BranchId LEFT OUTER JOIN AMS.CompanyUnit cu ON CU.CmpUnit_ID = D.CompanyUnit LEFT OUTER JOIN HOS.PatientMaster pm ON PM.PaitentId = SM.PatientId LEFT OUTER JOIN AMS.AccountGroup ag1 ON PM.AccountLedger = ag1.GrpId LEFT OUTER JOIN AMS.Department d1 ON D1.DId = PM.DepartmentId LEFT OUTER JOIN AMS.Branch b3 ON D1.Branch_ID = B3.Branch_ID LEFT OUTER JOIN HOS.Doctor d2 ON PM.DrId = D2.DrId') END;